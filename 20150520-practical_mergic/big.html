<!doctype html>
<html>
  <head>
    <title></title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <link rel="stylesheet" type='text/css' href="/styles/big.css">
    <script src="/scripts/big.js"></script>
  </head>
  <body>
<div>
Practical Mergic
</div>
<div>
<p><center>
planspace.org</p>
<p>@planarrowspace
</center></p>
</div>
<div>
<p><img width="1000%" title="Tweed Courthouse" src="img/tweed.jpg" /></p>
</div>
<div>
<blockquote>
<p>“There are only two hard things in computer science: cache invalidation and naming things.”</p>
</blockquote>
</div>
<div>
<p>What are we talking about?</p>
</div>
<div>
<p>when names are the same</p>
</div>
<div>
<p>when names aren't the same</p>
</div>
<div>
<p>demo: kinds of boys</p>
</div>
<div>
<p><img width="1000%" title="This happens." src="img/this_happens.png" /></p>
</div>
<div>
<p>merge</p>
</div>
<div>
<p><img height="1000%" title="dplyr cheat sheet joins" src="img/dplyr_joins.png" /></p>
</div>
<div>
<p><img width="1000%" title="left join" src="img/left_join.png" /></p>
</div>
<div>
<p><img width="1000%" title="right join" src="img/right_join.png" /></p>
</div>
<div>
<p><img width="1000%" title="inner join" src="img/inner_join.png" /></p>
</div>
<div>
<p><img width="1000%" title="outer join" src="img/outer_join.png" /></p>
</div>
<div>
<p><img height="1000%" title="dplyr cheat sheet joins" src="img/dplyr_joins.png" /></p>
</div>
<div>
<p>How many rows do you get when you outer join two tables?</p>
</div>
<div>
<pre><code class="language-r">> nrow(first)
## [1] 3
> nrow(second)
## [1] 3
> result &lt;- merge(first, second)
> nrow(result)
## [1] 3</code></pre>
</div>
<div>
<pre><code class="language-text"> x    y1        x   y2        x    y1   y2
 1 looks        1 good        1 looks good
 2    oh        2  boy        2    oh  boy
 3  well        2   no        2    oh   no</code></pre>
</div>
<div>
<p>when names are the same</p>
</div>
<div>
<p>when names aren't the same</p>
</div>
<div>
<p>demo: let's play tennis</p>
</div>
<div>
<p>single field deduplication</p>
</div>
<div>
<pre><code>Lukas Lacko             F Pennetta
Leonardo Mayer          S Williams
Marcos Baghdatis        C Wozniacki
Santiago Giraldo        E Bouchard
Juan Monaco             N.Djokovic
Dmitry Tursunov         S.Giraldo
Dudi Sela               Y-H.Lu
Fabio Fognini           T.Robredo
...                     ...</code></pre>
</div>
<div>
<p>demo: Open Refine</p>
</div>
<div>
<p><img height="1000%" title="ermahgerd mergic" src="img/ermahgerd.png" /></p>
</div>
<div>
<ul>
<li>simple</li>
<li>customizable</li>
<li>reproducible</li>
</ul>
</div>
<div>
<p>the tool disappears</p>
</div>
<div>
<p>any distance function</p>
</div>
<div>
<p>really reproducible</p>
</div>
<div>
<p><img width="1000%" title="big data" src="img/big_data.png" /></p>
</div>
<div>
<pre><code>Santiago Giraldo,Leonardo Mayer
Santiago Giraldo,Dudi Sela
Santiago Giraldo,Juan Monaco
Santiago Giraldo,S Williams
Santiago Giraldo,C Wozniacki
Santiago Giraldo,S.Giraldo
Santiago Giraldo,Marcos Baghdatis
Santiago Giraldo,Y-H.Lu
...</code></pre>
</div>
<div>
<pre><code>Karolina Pliskova,K Pliskova</code></pre>
</div>
<div>
<pre><code>Kristyna Pliskova,K Pliskova</code></pre>
</div>
<div>
<p>sets &gt; pairs</p>
</div>
<div>
<p>workflow support for reproducible deduplication and merging</p>
</div>
<div>
<p>demo: mergic tennis</p>
</div>
<div>
<p>distance matters</p>
</div>
<div>
<p>extension to multiple fields</p>
</div>
<div>
<pre><code class="language-text">name
----
Bob
Rob
Robert</code></pre>
</div>
<div>
<pre><code class="language-text">name, name
----------
Bob, Bobby
Bob, Robert
Bobby, Robert</code></pre>
</div>
<div>
<p><img width="1000%" title="one dimensional" src="img/one_dimensional.png" /></p>
</div>
<div>
<pre><code class="language-text">name,    hometown
-----------------
Bob,     New York
Rob,     NYC
Robert,  "NY, NY"</code></pre>
</div>
<div>
<p><img height="1000%" title="two dimensional" src="img/two_dimensional.png" /></p>
</div>
<div>
<p>R: RecordLinkage</p>
</div>
<div>
<p><code>dedupe</code></p>
</div>
<div>
<p>demo: csvdedupe</p>
<hr />
<pre><code class="language-bash">csvdedupe RLdata500.csv --field_names $(head -1 RLdata500.csv | tr ',' ' ')</code></pre>

<p>We go into an interactive supervision stage in which <code>dedupe</code> asks us to clarify things. The hope is that it will learn what matters.</p>
<p>You can build this kind of behavior into your own systems; there is an <a href="http://datamade.github.io/dedupe-examples/docs/csv_example.html">example</a>.</p>
<p>At the end you get output that you can use much like the <code>table</code> output from <code>mergic</code>. It needs some transforming to be easily reviewed by humans though.</p>
</div>
<div>
<p>The “clustering” that we've been doing hasn't been much like usual clustering.</p>
<p>In part, this is because we we've only had distances between strings without having a real “string space”.</p>
<p>I'm going to just sketch out this direction; I think it's interesting but I haven't seen any real results in it yet.</p>
</div>
<div>
<p>Say these are the items we're working with. We can use Levenshtein edit distance to make a distance matrix.</p>
</div>
<div>
<p>So here's a distance matrix, and it looks the way we'd expect. But we still don't have <em>coordinates</em> for our words.</p>
<p>Luckily, there is at least one technique for coming up with coordinates when you have a distance matrix. Let's use <a href="http://en.wikipedia.org/wiki/Multidimensional_scaling">multidimensional scaling</a>! There's a nice <a href="http://scikit-learn.org/stable/auto_examples/manifold/plot_mds.html">implementation in sklearn</a>.</p>
</div>
<div>
<p>Here's all the code it takes.</p>
</div>
<div>
<p>And here's the result! This is at least a fun visualization, and I wonder if doing clustering in a space like this might sometimes lead to better results.</p>
<p>The key thing here is that we're clustering on the elements themselves, rather than indirectly via the pairwise distances.</p>
<p>There are other ways of getting coordinates for words. This includes the very interesting <a href="https://code.google.com/p/word2vec/">word2vec</a> and related techniques.</p>
<p>Also, you might have items are already naturally coordinates, for example if you have medical data like a person's height or weight.</p>
</div>
<div>

</div>
<div>
<p>I also hope to see you at <a href="http://opendatascicon.com/">Open Data Science Con</a> in Boston!</p>
</div>
<div>
<p>Thank you!</p>
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-44351009-1', 'auto');
  ga('send', 'pageview');
</script>
  </body>
</html>
